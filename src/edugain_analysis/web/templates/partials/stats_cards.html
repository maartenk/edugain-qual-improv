<section class="grid" id="stats-cards">
    <article>
        <header class="stat-label">Total Entities</header>
        <div class="stat-value">{{ "{:,}".format(snapshot.total_entities) }}</div>
        <small>{{ "{:,}".format(snapshot.total_sps) }} SPs â€¢ {{ "{:,}".format(snapshot.total_idps) }} IdPs</small>
    </article>

    <article>
        <header class="stat-label">Privacy Coverage (SPs)</header>
        <div class="stat-value {% if snapshot.coverage_pct >= 80 %}coverage-high{% elif snapshot.coverage_pct >= 50 %}coverage-medium{% else %}coverage-low{% endif %}">
            {{ "%.1f"|format(snapshot.coverage_pct) }}%
        </div>
        <div class="speedometer {% if snapshot.coverage_pct >= 80 %}coverage-high{% elif snapshot.coverage_pct >= 50 %}coverage-medium{% else %}coverage-low{% endif %}">
            <div class="speedometer-arc"></div>
            <div class="speedometer-needle" style="transform: rotate({{ (snapshot.coverage_pct / 100 * 180) - 90 }}deg);"></div>
        </div>
        <progress value="{{ snapshot.coverage_pct }}" max="100"></progress>
        <small>{{ "{:,}".format(snapshot.sps_with_privacy) }} of {{ "{:,}".format(snapshot.total_sps) }} SPs</small>
    </article>

    <article>
        <header class="stat-label">Security Contacts (SPs)</header>
        {% set sp_sec_pct = (snapshot.sps_has_security / snapshot.total_sps * 100) if snapshot.total_sps > 0 else 0 %}
        <div class="stat-value {% if sp_sec_pct >= 80 %}coverage-high{% elif sp_sec_pct >= 50 %}coverage-medium{% else %}coverage-low{% endif %}">
            {{ "%.1f"|format(sp_sec_pct) }}%
        </div>
        <div class="speedometer {% if sp_sec_pct >= 80 %}coverage-high{% elif sp_sec_pct >= 50 %}coverage-medium{% else %}coverage-low{% endif %}">
            <div class="speedometer-arc"></div>
            <div class="speedometer-needle" style="transform: rotate({{ (sp_sec_pct / 100 * 180) - 90 }}deg);"></div>
        </div>
        <progress value="{{ sp_sec_pct }}" max="100"></progress>
        <small>{{ "{:,}".format(snapshot.sps_has_security) }} of {{ "{:,}".format(snapshot.total_sps) }} SPs</small>
    </article>

    <article>
        <header class="stat-label">Security Contacts (IdPs)</header>
        {% set idp_sec_pct = (snapshot.idps_has_security / snapshot.total_idps * 100) if snapshot.total_idps > 0 else 0 %}
        <div class="stat-value {% if idp_sec_pct >= 80 %}coverage-high{% elif idp_sec_pct >= 50 %}coverage-medium{% else %}coverage-low{% endif %}">
            {{ "%.1f"|format(idp_sec_pct) }}%
        </div>
        <div class="speedometer {% if idp_sec_pct >= 80 %}coverage-high{% elif idp_sec_pct >= 50 %}coverage-medium{% else %}coverage-low{% endif %}">
            <div class="speedometer-arc"></div>
            <div class="speedometer-needle" style="transform: rotate({{ (idp_sec_pct / 100 * 180) - 90 }}deg);"></div>
        </div>
        <progress value="{{ idp_sec_pct }}" max="100"></progress>
        <small>{{ "{:,}".format(snapshot.idps_has_security) }} of {{ "{:,}".format(snapshot.total_idps) }} IdPs</small>
    </article>

    <article>
        <header class="stat-label">SIRTFI Coverage (SPs)</header>
        {% set sp_sirtfi_pct = (snapshot.sps_has_sirtfi / snapshot.total_sps * 100) if snapshot.total_sps > 0 else 0 %}
        <div class="stat-value {% if sp_sirtfi_pct >= 80 %}coverage-high{% elif sp_sirtfi_pct >= 50 %}coverage-medium{% else %}coverage-low{% endif %}">
            {{ "%.1f"|format(sp_sirtfi_pct) }}%
        </div>
        <div class="speedometer {% if sp_sirtfi_pct >= 80 %}coverage-high{% elif sp_sirtfi_pct >= 50 %}coverage-medium{% else %}coverage-low{% endif %}">
            <div class="speedometer-arc"></div>
            <div class="speedometer-needle" style="transform: rotate({{ (sp_sirtfi_pct / 100 * 180) - 90 }}deg);"></div>
        </div>
        <progress value="{{ sp_sirtfi_pct }}" max="100"></progress>
        <small>{{ "{:,}".format(snapshot.sps_has_sirtfi) }} of {{ "{:,}".format(snapshot.total_sps) }} SPs</small>
    </article>

    <article>
        <header class="stat-label">SIRTFI Coverage (IdPs)</header>
        {% set idp_sirtfi_pct = (snapshot.idps_has_sirtfi / snapshot.total_idps * 100) if snapshot.total_idps > 0 else 0 %}
        <div class="stat-value {% if idp_sirtfi_pct >= 80 %}coverage-high{% elif idp_sirtfi_pct >= 50 %}coverage-medium{% else %}coverage-low{% endif %}">
            {{ "%.1f"|format(idp_sirtfi_pct) }}%
        </div>
        <div class="speedometer {% if idp_sirtfi_pct >= 80 %}coverage-high{% elif idp_sirtfi_pct >= 50 %}coverage-medium{% else %}coverage-low{% endif %}">
            <div class="speedometer-arc"></div>
            <div class="speedometer-needle" style="transform: rotate({{ (idp_sirtfi_pct / 100 * 180) - 90 }}deg);"></div>
        </div>
        <progress value="{{ idp_sirtfi_pct }}" max="100"></progress>
        <small>{{ "{:,}".format(snapshot.idps_has_sirtfi) }} of {{ "{:,}".format(snapshot.total_idps) }} IdPs</small>
    </article>
</section>

<!-- Last Updated Info -->
<section>
    <p style="text-align: center;"><small>Last updated: {{ snapshot.timestamp.strftime('%Y-%m-%d %H:%M:%S') }} ({{ snapshot.timestamp|time_ago }})</small></p>
</section>
